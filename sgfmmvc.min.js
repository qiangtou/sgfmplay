(function(f,j){var g=j.sgfmmvc=j.sgfmmvc||{};g.Model=function(e){e=e||{};var c=e.defaults||{};this.id="id";this.objchange=f.noop;this.get=function(b){return c[b]};this.getAttrs=function(){return c};this.set=function(b,a){if("object"==typeof b){for(var d in b)h=this.set(d,b[d])||h;h&&this.objchange.call(this);return h}var h=!1;d=c[b];d!=a&&(c[b]=a,h=!0,this.change(b,d,a));return h};this.change=function(b,a,d){console&&console.log&&console.log("id:"+this.get(this.id)+",["+b+"] changed from ["+a+"] to ["+
d+"]")};this.fetch=function(b){var a=this,d=this.url,c=b||function(a){this.set(a)};d&&f.ajax({url:d,success:function(d){"function"==typeof b&&c.call(a,d)},dataType:"json"})};f.extend(this,e)};g.Models=function(e){var c={},b=0;this.length=function(){return b};this.model=null;this.init=f.noop;this.create=function(a){a=new this.model({defaults:a});return this.add(a)};this.add=function(a){var d=a.get(a.id);c[d]||(b++,c[d]=a);return this};this.del=function(a){a=a.get(a.id);c[a]&&(delete c[a],b--);return this};
this.empty=function(){c={};b=0};this.toArr=function(){var a=[];for(m in c)a.push(c[m])};this.getById=function(a){return c[a]};this.get=function(a){var d=0;for(m in c)if(d++,d==a)return c[m]};this.fetch=function(a){var d=this,b=this.url;b&&f.ajax({url:b,success:function(b){"function"==typeof a&&a.call(d,b)},dataType:"json"})};f.extend(this,e);this.init.call(this,e)};g.View=function(e){var c=this,b={},a={};this.init=f.noop;this.$=f("<div></div>");this.render=f.noop;this.events={};this.listenTo=function(d,
h,e){var g,j;g=h.split(":");h=g[0];(g=g[1])&&(a[g]=e);j=b[h]||(b[h]=d[h])||f.noop;d[h]=function(){var b=arguments[0];j.apply(d,arguments);(a[b]||e||f.noop).apply(c,arguments)}};this.addEvents=function(){var a,b=this.events;for(eventsStr in b)a=eventsStr.split(" "),selector=a[0],eventType=a[1],fun=b[eventsStr],"string"==typeof fun&&(fun=this[fun]),this.$.delegate(selector,eventType,f.proxy(fun,this))};f.extend(c,e);this.init.call(this,e);this.addEvents.call(this,e)};g.Model.extend=g.Models.extend=
g.View.extend=function(e){var c=this;return function(b){return new c(f.extend(e,b))}};g.replace=function(e,c){return e.replace(/{(.*?)}/igm,function(b,a){return c[a]||b})}})(jQuery,window);
